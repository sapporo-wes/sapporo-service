components:
  schemas:
    Body_create_token_token_post:
      properties:
        password:
          description: The password for authentication.
          title: Password
          type: string
        username:
          description: The username for authentication.
          title: Username
          type: string
      required:
      - username
      - password
      title: Body_create_token_token_post
      type: object
    Body_run_workflow_runs_post:
      properties:
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
        workflow_attachment:
          items:
            format: binary
            type: string
          title: Workflow Attachment
          type: array
        workflow_attachment_obj:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Extension specific to sapporo-wes-2.0.0: e.g., [{ "file_name":
            "path/to/file", "file_url": "https://example.com/path/to/file" }]'
          title: Workflow Attachment Obj
        workflow_engine:
          description: Optional in original WES 1.1.0, but required in sapporo-wes-2.0.0.
          title: Workflow Engine
          type: string
        workflow_engine_parameters:
          anyOf:
          - type: string
          - type: 'null'
          title: Workflow Engine Parameters
        workflow_engine_version:
          anyOf:
          - type: string
          - type: 'null'
          title: Workflow Engine Version
        workflow_params:
          anyOf:
          - type: string
          - type: 'null'
          title: Workflow Params
        workflow_type:
          description: Optional in original WES 1.1.0, but required in sapporo-wes-2.0.0.
          title: Workflow Type
          type: string
        workflow_type_version:
          anyOf:
          - type: string
          - type: 'null'
          title: Workflow Type Version
        workflow_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Workflow Url
      required:
      - workflow_type
      - workflow_engine
      title: Body_run_workflow_runs_post
      type: object
    DefaultWorkflowEngineParameter:
      description: A message that allows one to describe default parameters for a
        workflow engine.
      properties:
        default_value:
          anyOf:
          - type: string
          - type: 'null'
          description: The stringified version of the default parameter. e.g. "2.45".
          title: Default Value
        name:
          anyOf:
          - type: string
          - type: 'null'
          description: The name of the parameter
          title: Name
        type:
          anyOf:
          - type: string
          - type: 'null'
          description: Describes the type of the parameter, e.g. float.
          title: Type
      title: DefaultWorkflowEngineParameter
      type: object
    ErrorResponse:
      description: An object that can optionally include information about the error.
      properties:
        msg:
          description: A detailed error message.
          title: Msg
          type: string
        status_code:
          description: The integer representing the HTTP status code (e.g. 200, 404).
          title: Status Code
          type: integer
      required:
      - msg
      - status_code
      title: ErrorResponse
      type: object
    ExecutableWorkflows:
      description: '**sapporo-wes-2.0.0 extension:** Schema for executable_workflows.json.
        List of workflows that can be executed in this service.'
      example:
        workflows:
        - https://raw.githubusercontent.com/common-workflow-language/common-workflow-language/main/v1.0/examples/1st-tool.cwl
      properties:
        workflows:
          description: List of executable workflows. Each workflow is a URL to the
            workflow file.
          items:
            type: string
          title: Workflows
          type: array
      required:
      - workflows
      title: ExecutableWorkflows
      type: object
    FileObject:
      description: '**sapporo-wes-2.0.0 extension:** File object used in Workflow
        Attachment and Output files, etc.'
      properties:
        file_name:
          description: File name. It is a relative path from the certain directory.
            That is, if the file is ./some_dir/some_file, this field is 'some_dir/some_file'.
          title: File Name
          type: string
        file_url:
          description: Download URL of the file.
          title: File Url
          type: string
      required:
      - file_name
      - file_url
      title: FileObject
      type: object
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          title: Detail
          type: array
      title: HTTPValidationError
      type: object
    Log:
      description: Log and other info
      properties:
        cmd:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: The command line that was executed
          title: Cmd
        end_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the command stopped executing (completed, failed, or cancelled),
            in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: End Time
        exit_code:
          anyOf:
          - type: integer
          - type: 'null'
          description: Exit code of the program
          title: Exit Code
        name:
          anyOf:
          - type: string
          - type: 'null'
          description: The task or workflow name
          title: Name
        start_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the command started executing, in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: Start Time
        stderr:
          anyOf:
          - type: string
          - type: 'null'
          description: A URL to retrieve standard error logs of the workflow run or
            task.  This URL may change between status requests, or may not be available
            until the task or workflow has finished execution.  Should be available
            using the same credentials used to access the WES endpoint.
          title: Stderr
        stdout:
          anyOf:
          - type: string
          - type: 'null'
          description: A URL to retrieve standard output logs of the workflow run
            or task.  This URL may change between status requests, or may not be available
            until the task or workflow has finished execution.  Should be available
            using the same credentials used to access the WES endpoint.
          title: Stdout
        system_logs:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: 'System logs are any logs the system decides are relevant,

            which are not tied directly to a workflow.

            Content is implementation specific: format, size, etc.


            System logs may be collected here to provide convenient access.


            For example, the system may include an error message that caused

            a SYSTEM_ERROR state (e.g. disk is full), etc.'
          title: System Logs
      title: Log
      type: object
    MeResponse:
      properties:
        username:
          title: Username
          type: string
      required:
      - username
      title: MeResponse
      type: object
    Organization:
      description: Organization providing the service.
      properties:
        name:
          description: Name of the organization responsible for the service.
          examples:
          - My organization
          title: Name
          type: string
        url:
          description: URL of the website of the organization (RFC 3986 format).
          examples:
          - https://example.com
          format: uri
          maxLength: 2083
          minLength: 1
          title: Url
          type: string
      required:
      - name
      - url
      title: Organization
      type: object
    RunId:
      properties:
        run_id:
          description: workflow run ID
          title: Run Id
          type: string
      required:
      - run_id
      title: RunId
      type: object
    RunListResponse:
      description: 'The service will return a RunListResponse when receiving a successful
        RunListRequest. DEPRECIATION WARNING: The use of `RunStatus` as the schema
        for `runs` array items will not be permitted from the next major version of
        the specification (2.0.0) onwards. We encourage implementers to use `RunSummary`
        instead.

        '
      example:
        runs:
        - end_time: '2024-01-15T10:35:00Z'
          run_id: abc123-def456-ghi789
          start_time: '2024-01-15T10:30:00Z'
          state: COMPLETE
          tags:
            project: example
      properties:
        next_page_token:
          anyOf:
          - type: string
          - type: 'null'
          description: A token which may be supplied as `page_token` in workflow run
            list request to get the next page of results.  An empty string indicates
            there are no more items to return.
          title: Next Page Token
        runs:
          anyOf:
          - items:
              $ref: '#/components/schemas/RunStatus'
            type: array
          - items:
              $ref: '#/components/schemas/RunSummary'
            type: array
          - type: 'null'
          description: A list of workflow runs that the service has executed or is
            executing. The list is filtered to only include runs that the caller has
            permission to see.
          title: Runs
      title: RunListResponse
      type: object
    RunLog:
      properties:
        outputs:
          anyOf:
          - items:
              $ref: '#/components/schemas/FileObject'
            type: array
          - type: 'null'
          description: 'The outputs from the workflow run.


            **sapporo-wes-2.0.0 extension:**


            - original wes-1.1.0: Optional[Dict[str, Any]]

            - sapporo-wes-2.0.0: Optional[List[FileObject]]

            '
          title: Outputs
        request:
          anyOf:
          - $ref: '#/components/schemas/RunRequest'
          - type: 'null'
        run_id:
          anyOf:
          - type: string
          - type: 'null'
          description: workflow run ID
          title: Run Id
        run_log:
          anyOf:
          - $ref: '#/components/schemas/Log'
          - type: 'null'
        state:
          anyOf:
          - $ref: '#/components/schemas/State'
          - type: 'null'
        task_logs:
          anyOf:
          - items:
              anyOf:
              - $ref: '#/components/schemas/Log'
              - $ref: '#/components/schemas/TaskLog'
            type: array
          - type: 'null'
          description: The logs, and other key info like timing and exit code, for
            each step in the workflow run. This field is deprecated and the `task_logs_url`
            should be used to retrieve a paginated list of steps from the workflow
            run. This field will be removed in the next major version of the  specification
            (2.0.0)
          title: Task Logs
        task_logs_url:
          anyOf:
          - type: string
          - type: 'null'
          description: A reference to the complete url which may be used to obtain
            a paginated list of task logs for this workflow
          title: Task Logs Url
      title: RunLog
      type: object
    RunRequest:
      description: "To execute a workflow, send a run request including all the details\
        \ needed to begin downloading\nand executing a given workflow.\nIf workflow_engine\
        \ and workflow_engine_version are not provided, servers can use the most recent\
        \ workflow_engine_version of workflow_engine that WES instance uses to process\
        \ the request if \nsupports for the requested workflow_type."
      properties:
        tags:
          anyOf:
          - additionalProperties:
              type: string
            type: object
          - type: 'null'
          title: Tags
        workflow_engine:
          anyOf:
          - type: string
          - type: 'null'
          description: The workflow engine, must be one supported by this WES instance.
            Required if workflow_engine_version is provided.
          title: Workflow Engine
        workflow_engine_parameters:
          anyOf:
          - additionalProperties:
              type: string
            type: object
          - type: 'null'
          title: Workflow Engine Parameters
        workflow_engine_version:
          anyOf:
          - type: string
          - type: 'null'
          description: The workflow engine version, must be one supported by this
            WES instance. If workflow_engine is provided, but workflow_engine_version
            is not, servers can make no assumptions with regard to the engine version
            the WES instance uses to process the request if  that WES instance supports
            multiple versions of the requested engine.
          title: Workflow Engine Version
        workflow_params:
          anyOf:
          - type: object
          - type: string
          description: 'REQUIRED

            The workflow run parameterizations (JSON encoded), including input and
            output file locations


            **sapporo-wes-2.0.0 extension:**


            - original wes-1.1.0: Dict[str, Any]

            - sapporo-wes-2.0.0: Union[Dict[str, Any], str]

            '
          title: Workflow Params
        workflow_type:
          description: 'REQUIRED

            The workflow descriptor type, must be "CWL" or "WDL" currently (or another
            alternative supported by this WES instance)'
          title: Workflow Type
          type: string
        workflow_type_version:
          description: 'REQUIRED

            The workflow descriptor type version, must be one supported by this WES
            instance'
          title: Workflow Type Version
          type: string
        workflow_url:
          description: 'REQUIRED

            The workflow CWL or WDL document. When `workflow_attachments` is used
            to attach files, the `workflow_url` may be a relative path to one of the
            attachments.'
          title: Workflow Url
          type: string
      required:
      - workflow_params
      - workflow_type
      - workflow_type_version
      - workflow_url
      title: RunRequest
      type: object
    RunStatus:
      description: State information of a workflow run
      properties:
        run_id:
          title: Run Id
          type: string
        state:
          anyOf:
          - $ref: '#/components/schemas/State'
          - type: 'null'
          description: "State can take any of the following values:\n\n  + UNKNOWN:\
            \ The state of the task is unknown. This provides a safe default for messages\
            \ where this field is missing, for example, so that a missing field does\
            \ not accidentally imply that the state is QUEUED.\n\n  + QUEUED: The\
            \ task is queued.\n\n  + INITIALIZING: The task has been assigned to a\
            \ worker and is currently preparing to run. For example, the worker may\
            \ be turning on, downloading input files, etc.\n\n  + RUNNING: The task\
            \ is running. Input files are downloaded and the first Executor has been\
            \ started.\n\n  + PAUSED: The task is paused. An implementation may have\
            \ the ability to pause a task, but this is not required.\n\n  + COMPLETE:\
            \ The task has completed running. Executors have exited without error\n\
            \  and output files have been successfully uploaded.\n\n  + EXECUTOR_ERROR:\
            \ The task encountered an error in one of the Executor processes. Generally,\n\
            this means that an Executor exited with a non-zero exit code.\n\n  + SYSTEM_ERROR:\
            \ The task was stopped due to a system error, but not from an Executor,\n\
            for example an upload failed due to network issues, the worker's ran out\
            \ of disk space, etc.\n\n  + CANCELED: The task was canceled by the user.\n\
            \n  + CANCELING: The task was canceled by the user, and is in the process\
            \ of stopping.\n\n  + PREEMPTED: The task is stopped (preempted) by the\
            \ system. The reasons for this would be tied to\nthe specific system running\
            \ the job. Generally, this means that the system reclaimed the compute\
            \ capacity for reallocation.\n"
      required:
      - run_id
      title: RunStatus
      type: object
    RunSummary:
      description: Small description of a workflow run
      properties:
        end_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the run stopped executing (completed, failed, or cancelled),
            in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: End Time
        run_id:
          title: Run Id
          type: string
        start_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the run started executing, in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: Start Time
        state:
          anyOf:
          - $ref: '#/components/schemas/State'
          - type: 'null'
          description: "State can take any of the following values:\n\n  + UNKNOWN:\
            \ The state of the task is unknown. This provides a safe default for messages\
            \ where this field is missing, for example, so that a missing field does\
            \ not accidentally imply that the state is QUEUED.\n\n  + QUEUED: The\
            \ task is queued.\n\n  + INITIALIZING: The task has been assigned to a\
            \ worker and is currently preparing to run. For example, the worker may\
            \ be turning on, downloading input files, etc.\n\n  + RUNNING: The task\
            \ is running. Input files are downloaded and the first Executor has been\
            \ started.\n\n  + PAUSED: The task is paused. An implementation may have\
            \ the ability to pause a task, but this is not required.\n\n  + COMPLETE:\
            \ The task has completed running. Executors have exited without error\n\
            \  and output files have been successfully uploaded.\n\n  + EXECUTOR_ERROR:\
            \ The task encountered an error in one of the Executor processes. Generally,\n\
            this means that an Executor exited with a non-zero exit code.\n\n  + SYSTEM_ERROR:\
            \ The task was stopped due to a system error, but not from an Executor,\n\
            for example an upload failed due to network issues, the worker's ran out\
            \ of disk space, etc.\n\n  + CANCELED: The task was canceled by the user.\n\
            \n  + CANCELING: The task was canceled by the user, and is in the process\
            \ of stopping.\n\n  + PREEMPTED: The task is stopped (preempted) by the\
            \ system. The reasons for this would be tied to\nthe specific system running\
            \ the job. Generally, this means that the system reclaimed the compute\
            \ capacity for reallocation.\n"
        tags:
          additionalProperties:
            type: string
          description: Arbitrary key/value tags added by the client during run creation
          title: Tags
          type: object
      required:
      - run_id
      - tags
      title: RunSummary
      type: object
    ServiceInfo:
      example:
        auth_instructions_url: https://github.com/sapporo-wes/sapporo-service#authentication
        default_workflow_engine_parameters: {}
        id: org.sapporo.service
        name: Sapporo WES
        organization:
          name: Sapporo Project
          url: https://github.com/sapporo-wes
        supported_filesystem_protocols:
        - http
        - https
        - file
        supported_wes_versions:
        - 1.0.0
        - 1.1.0
        system_state_counts:
          COMPLETE: 10
          QUEUED: 0
          RUNNING: 2
        tags: {}
        type:
          artifact: wes
          group: org.ga4gh
          version: 1.1.0
        version: 2.0.0
        workflow_engine_versions:
          cwltool:
            workflow_engine_version:
            - '3.1'
        workflow_type_versions:
          CWL:
            workflow_type_version:
            - v1.0
            - v1.1
            - v1.2
      properties:
        auth_instructions_url:
          description: A web page URL with human-readable instructions on how to get
            an authorization token for use with a specific WES endpoint.
          format: uri
          maxLength: 2083
          minLength: 1
          title: Auth Instructions Url
          type: string
        contactUrl:
          anyOf:
          - format: uri
            maxLength: 2083
            minLength: 1
            type: string
          - type: 'null'
          description: URL of the contact for the provider of this service, e.g. a
            link to a contact form (RFC 3986 format), or an email (RFC 2368 format).
          examples:
          - mailto:support@example.com
          title: Contacturl
        createdAt:
          anyOf:
          - type: string
          - type: 'null'
          description: Timestamp describing when the service was first deployed and
            available (RFC 3339 format).
          examples:
          - '2019-06-04T12:58:19Z'
          title: Createdat
        default_workflow_engine_parameters:
          additionalProperties:
            items:
              $ref: '#/components/schemas/DefaultWorkflowEngineParameter'
            type: array
          description: 'Each workflow engine can present additional parameters that
            can be sent to the workflow engine. This message will list the default
            values, and their types for each workflow engine.


            **sapporo-wes-2.0.0 extension:**


            - original wes-1.1.0: List[DefaultWorkflowEngineParameter]

            - sapporo-wes-2.0.0: Dict[str, List[DefaultWorkflowEngineParameter]]

            '
          title: Default Workflow Engine Parameters
          type: object
        description:
          anyOf:
          - type: string
          - type: 'null'
          description: Description of the service. Should be human readable and provide
            information about the service.
          examples:
          - This service provides...
          title: Description
        documentationUrl:
          anyOf:
          - format: uri
            maxLength: 2083
            minLength: 1
            type: string
          - type: 'null'
          description: URL of the documentation of this service (RFC 3986 format).
            This should help someone learn how to use your service, including any
            specifics required to access data, e.g. authentication.
          examples:
          - https://docs.myservice.example.com
          title: Documentationurl
        environment:
          anyOf:
          - type: string
          - type: 'null'
          description: Environment the service is running in. Use this to distinguish
            between production, development and testing/staging deployments. Suggested
            values are prod, test, dev, staging. However this is advised and not enforced.
          examples:
          - test
          title: Environment
        id:
          description: Unique ID of this service. Reverse domain name notation is
            recommended, though not required. The identifier should attempt to be
            globally unique so it can be used in downstream aggregator services e.g.
            Service Registry.
          examples:
          - org.ga4gh.myservice
          title: Id
          type: string
        name:
          description: Name of this service. Should be human readable.
          examples:
          - My project
          title: Name
          type: string
        organization:
          $ref: '#/components/schemas/Organization'
        supported_filesystem_protocols:
          description: The filesystem protocols supported by this service, currently
            these may include common protocols using the terms 'http', 'https', 'sftp',
            's3', 'gs', 'file', or 'synapse', but others  are possible and the terms
            beyond these core protocols are currently not fixed.   This section reports
            those protocols (either common or not) supported by this WES service.
          items:
            type: string
          title: Supported Filesystem Protocols
          type: array
        supported_wes_versions:
          description: The version(s) of the WES schema supported by this service
          items:
            type: string
          title: Supported Wes Versions
          type: array
        system_state_counts:
          additionalProperties:
            type: integer
          title: System State Counts
          type: object
        tags:
          additionalProperties:
            type: string
          description: A message containing useful information about the running service,
            including supported versions and default settings.
          title: Tags
          type: object
        type:
          $ref: '#/components/schemas/ServiceType'
          description: GA4GH service.
        updatedAt:
          anyOf:
          - type: string
          - type: 'null'
          description: Timestamp describing when the service was last updated (RFC
            3339 format).
          examples:
          - '2019-06-04T12:58:19Z'
          title: Updatedat
        version:
          description: Version of the service being described. Semantic versioning
            is recommended, but other identifiers, such as dates or commit hashes,
            are also allowed. The version should be changed whenever the service is
            updated.
          examples:
          - 1.0.0
          title: Version
          type: string
        workflow_engine_versions:
          additionalProperties:
            $ref: '#/components/schemas/WorkflowEngineVersion'
          title: Workflow Engine Versions
          type: object
        workflow_type_versions:
          additionalProperties:
            $ref: '#/components/schemas/WorkflowTypeVersion'
          title: Workflow Type Versions
          type: object
      required:
      - id
      - name
      - type
      - organization
      - version
      - workflow_type_versions
      - supported_wes_versions
      - supported_filesystem_protocols
      - workflow_engine_versions
      - default_workflow_engine_parameters
      - system_state_counts
      - auth_instructions_url
      - tags
      title: ServiceInfo
      type: object
    ServiceType:
      description: Type of a GA4GH service.
      properties:
        artifact:
          description: Name of the API or GA4GH specification implemented. Official
            GA4GH types should be assigned as part of standards approval process.
            Custom artifacts are supported.
          examples:
          - beacon
          title: Artifact
          type: string
        group:
          description: Namespace in reverse domain name format. Use `org.ga4gh` for
            implementations compliant with official GA4GH specifications. For services
            with custom APIs not standardized by GA4GH, or implementations diverging
            from official GA4GH specifications, use a different namespace (e.g. your
            organization's reverse domain name).
          examples:
          - org.ga4gh
          title: Group
          type: string
        version:
          description: Version of the API or specification. GA4GH specifications use
            semantic versioning.
          examples:
          - 1.0.0
          title: Version
          type: string
      required:
      - group
      - artifact
      - version
      title: ServiceType
      type: object
    State:
      enum:
      - UNKNOWN
      - QUEUED
      - INITIALIZING
      - RUNNING
      - PAUSED
      - COMPLETE
      - EXECUTOR_ERROR
      - SYSTEM_ERROR
      - CANCELED
      - CANCELING
      - PREEMPTED
      - DELETED
      - DELETING
      title: State
      type: string
    TaskListResponse:
      description: The service will return a TaskListResponse when receiving a successful
        TaskListRequest.
      properties:
        next_page_token:
          anyOf:
          - type: string
          - type: 'null'
          description: A token which may be supplied as `page_token` in workflow run
            task list request to get the next page of results.  An empty string indicates
            there are no more items to return.
          title: Next Page Token
        task_logs:
          anyOf:
          - items:
              $ref: '#/components/schemas/TaskLog'
            type: array
          - type: 'null'
          description: The logs, and other key info like timing and exit code, for
            each step in the workflow run.
          title: Task Logs
      title: TaskListResponse
      type: object
    TaskLog:
      description: Runtime information for a given task
      properties:
        cmd:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: The command line that was executed
          title: Cmd
        end_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the command stopped executing (completed, failed, or cancelled),
            in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: End Time
        exit_code:
          anyOf:
          - type: integer
          - type: 'null'
          description: Exit code of the program
          title: Exit Code
        id:
          description: A unique identifier which may be used to reference the task
          title: Id
          type: string
        name:
          description: The task or workflow name
          title: Name
          type: string
        start_time:
          anyOf:
          - type: string
          - type: 'null'
          description: When the command started executing, in ISO 8601 format "%Y-%m-%dT%H:%M:%SZ"
          title: Start Time
        stderr:
          anyOf:
          - type: string
          - type: 'null'
          description: A URL to retrieve standard error logs of the workflow run or
            task.  This URL may change between status requests, or may not be available
            until the task or workflow has finished execution.  Should be available
            using the same credentials used to access the WES endpoint.
          title: Stderr
        stdout:
          anyOf:
          - type: string
          - type: 'null'
          description: A URL to retrieve standard output logs of the workflow run
            or task.  This URL may change between status requests, or may not be available
            until the task or workflow has finished execution.  Should be available
            using the same credentials used to access the WES endpoint.
          title: Stdout
        system_logs:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: 'System logs are any logs the system decides are relevant,

            which are not tied directly to a task.

            Content is implementation specific: format, size, etc.


            System logs may be collected here to provide convenient access.


            For example, the system may include the name of the host

            where the task is executing, an error message that caused

            a SYSTEM_ERROR state (e.g. disk is full), etc.'
          title: System Logs
        tes_uri:
          anyOf:
          - type: string
          - type: 'null'
          description: An optional URL pointing to an extended task definition defined
            by a [TES api](https://github.com/ga4gh/task-execution-schemas)
          title: Tes Uri
      required:
      - name
      - id
      title: TaskLog
      type: object
    TokenResponse:
      properties:
        access_token:
          title: Access Token
          type: string
        token_type:
          default: bearer
          title: Token Type
          type: string
      required:
      - access_token
      title: TokenResponse
      type: object
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
      - loc
      - msg
      - type
      title: ValidationError
      type: object
    WorkflowEngineVersion:
      description: Available workflow engine versions supported by a given instance
        of the service.
      properties:
        workflow_engine_version:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          default: []
          description: An array of one or more acceptable engines versions for the
            `workflow_engine`
          title: Workflow Engine Version
      title: WorkflowEngineVersion
      type: object
    WorkflowTypeVersion:
      description: Available workflow types supported by a given instance of the service.
      properties:
        workflow_type_version:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          default: []
          description: an array of one or more acceptable types for the `workflow_type`
          title: Workflow Type Version
      title: WorkflowTypeVersion
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT token obtained from POST /token endpoint
      scheme: bearer
      type: http
    oauth2PasswordFlow:
      description: OAuth2 password flow for sapporo authentication
      flows:
        password:
          scopes: {}
          tokenUrl: /token
      type: oauth2
info:
  contact:
    name: Sapporo-WES Project Team
    url: https://github.com/sapporo-wes/sapporo-service/issues
  description: '*Run standard workflows on workflow execution platforms in a platform-agnostic
    way.*


    ## Executive Summary


    The Workflow Execution Service (WES) API provides a standard way for users to
    submit workflow requests to workflow execution systems and monitor their execution.
    This API lets users run a single workflow (currently [**CWL**](https://www.commonwl.org/)
    or [**WDL**](http://www.openwdl.org/) formatted workflows, with other types potentially
    supported in the future) on multiple different platforms, clouds, and environments.


    Key features of the API:


    - Request that a workflow be run.

    - Pass parameters to that workflow (e.g., input files, command-line arguments).

    - Get information about running workflows (e.g., status, errors, output file locations).

    - Cancel a running workflow.


    ## Sapporo-WES Extensions


    `sapporo-wes-2.0.0` extends the original WES API to provide enhanced functionality
    and support for additional features. This document describes the WES API and details
    the specific endpoints, request formats, and responses, aimed at developers of
    WES-compatible services and clients.

    '
  license:
    identifier: Apache-2.0
    name: Apache 2.0
    url: https://github.com/sapporo-wes/sapporo-service/blob/main/LICENSE
  title: GA4GH Workflow Execution Service API specification extended for the Sapporo
  version: 2.0.0
openapi: 3.1.0
paths:
  /executable-workflows:
    get:
      description: '**sapporo-wes-2.0.0 extension:**

        Return the list of workflows that can be executed in this service.

        If `workflows: []`, it indicates that there are no restrictions, and any workflow
        can be executed.

        If `workflows` contains workflow urls, only those workflows can be executed.'
      operationId: list_executable_wfs_executable_workflows_get
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExecutableWorkflows'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: ListExecutableWorkflows
  /me:
    get:
      description: '**sapporo-wes-2.0.0 extension:**


        Returns information about the currently authenticated user.


        This endpoint is useful for:

        - Verifying that a token is valid

        - Retrieving the username associated with the current session

        - Testing authentication configuration


        The username is extracted from the JWT token''s `preferred_username` claim
        (if present)

        or falls back to the `sub` (subject) claim.'
      operationId: get_me_me_get
      responses:
        '200':
          content:
            application/json:
              example:
                username: user1
              schema:
                $ref: '#/components/schemas/MeResponse'
          description: Authenticated user information
        '400':
          description: Authentication is not enabled
        '401':
          description: Invalid or expired token
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: Me
  /runs:
    get:
      description: 'This list should be provided in a stable ordering. (The actual
        ordering is implementation dependent.) When paging through the list, the client
        should not make assumptions about live updates, but should assume the contents
        of the list reflect the workflow list at the moment that the first page is
        requested.  To monitor a specific workflow run, use GetRunStatus or GetRunLog.


        **sapporo-wes-2.0.0 extension:**


        - This endpoint returns a snapshot that is aggregated every 30 minutes. It
        may not represent the latest state.

        - If you want to get the latest state of run, use `GET /runs/{run_id}` or
        `GET /runs/{run_id}/status` or use `latest=true` query parameter.'
      operationId: list_runs_runs_get
      parameters:
      - description: OPTIONAL The preferred number of workflow runs to return in a
          page. If not provided, the implementation should use a default page size.
          The implementation must not return more items than `page_size`, but it may
          return fewer.  Clients should not assume that if fewer than `page_size`
          items are returned that all items have been returned.  The availability
          of additional pages is indicated by the value of `next_page_token` in the
          response.
        in: query
        name: page_size
        required: false
        schema:
          default: 10
          description: OPTIONAL The preferred number of workflow runs to return in
            a page. If not provided, the implementation should use a default page
            size. The implementation must not return more items than `page_size`,
            but it may return fewer.  Clients should not assume that if fewer than
            `page_size` items are returned that all items have been returned.  The
            availability of additional pages is indicated by the value of `next_page_token`
            in the response.
          title: Page Size
          type: integer
      - description: OPTIONAL Token to use to indicate where to start getting results.
          If unspecified, return the first page of results.
        in: query
        name: page_token
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: OPTIONAL Token to use to indicate where to start getting results.
            If unspecified, return the first page of results.
          title: Page Token
      - description: '**sapporo-wes-2.0.0 extension:** Sort order of the runs based
          on start_time.'
        in: query
        name: sort_order
        required: false
        schema:
          default: desc
          description: '**sapporo-wes-2.0.0 extension:** Sort order of the runs based
            on start_time.'
          enum:
          - asc
          - desc
          title: Sort Order
          type: string
      - description: '**sapporo-wes-2.0.0 extension:**: Filter the runs based on the
          state (e.g., "COMPLETE", "RUNNING", etc.).'
        in: query
        name: state
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/State'
          - type: 'null'
          description: '**sapporo-wes-2.0.0 extension:**: Filter the runs based on
            the state (e.g., "COMPLETE", "RUNNING", etc.).'
          title: State
      - description: '**sapporo-wes-2.0.0 extension:**: A list of run IDs to retrieve
          specific runs.'
        in: query
        name: run_ids
        required: false
        schema:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: '**sapporo-wes-2.0.0 extension:**: A list of run IDs to retrieve
            specific runs.'
          title: Run Ids
      - description: '**sapporo-wes-2.0.0 extension:**: If True, return the latest
          state of runs instead of the snapshot.'
        in: query
        name: latest
        required: false
        schema:
          anyOf:
          - type: boolean
          - type: 'null'
          default: false
          description: '**sapporo-wes-2.0.0 extension:**: If True, return the latest
            state of runs instead of the snapshot.'
          title: Latest
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunListResponse'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: ListRuns
    post:
      description: 'This endpoint creates a new workflow run and returns a `RunId`
        to monitor its progress.

        The `workflow_attachment` array may be used to upload files that are required
        to execute the workflow, including the primary workflow, tools imported by
        the workflow, other files referenced by the workflow, or files which are part
        of the input.  The implementation should stage these files to a temporary
        directory and execute the workflow from there. These parts must have a Content-Disposition
        header with a "filename" provided for each part.  Filenames may include subdirectories,
        but must not include references to parent directories with ''..'' -- implementations
        should guard against maliciously constructed filenames.

        The `workflow_url` is either an absolute URL to a workflow file that is accessible
        by the WES endpoint, or a relative URL corresponding to one of the files attached
        using `workflow_attachment`.

        The `workflow_params` JSON object specifies input parameters, such as input
        files.  The exact format of the JSON object depends on the conventions of
        the workflow language being used.  Input files should either be absolute URLs,
        or relative URLs corresponding to files uploaded using `workflow_attachment`.  The
        WES endpoint must understand and be able to access URLs supplied in the input.  This
        is implementation specific.

        The `workflow_type` is the type of workflow language and must be "CWL" or
        "WDL" currently (or another alternative  supported by this WES instance).

        The `workflow_type_version` is the version of the workflow language submitted
        and must be one supported by this WES instance.

        The `workflow_engine` is the engine that supports the workflow_type and must
        be supported by this WES instance.

        The `workflow_engine_version` is the version of workflow engine and must be
        supported by this WES instance.

        See the `RunRequest` documentation for details about other fields.


        **sapporo-wes-2.0.0 extension:**


        - Added a field `workflow_attachment_obj`. With this field, download files
        from remote locations directly to the execution directory.'
      operationId: run_workflow_runs_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_run_workflow_runs_post'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunId'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: RunWorkflow
  /runs/{run_id}:
    delete:
      description: '**sapporo-wes-2.0.0 extension:**

        Delete the run and associated files.

        If the run is in progress, it will be canceled first.

        Then, the contents of the run_dir will be deleted, but `state.txt`, `start_time.txt`,
        and `end_time.txt` will not be deleted.

        This is because the information that the run has been deleted should be retained.'
      operationId: delete_run_runs__run_id__delete
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunId'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: DeleteRun
    get:
      description: 'This endpoint provides detailed information about a given workflow
        run. The returned result has information about the outputs produced by this
        workflow (if available), a log object which allows the stderr and stdout to
        be retrieved, a log array so stderr/stdout for individual tasks can be retrieved,
        and the overall state of the workflow run (e.g. RUNNING, see the State section).


        **sapporo-wes-2.0.0 extension:**


        - Always check the contents of the run dir and return the latest state of
        the run.'
      operationId: get_run_log_runs__run_id__get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunLog'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: GetRunLog
  /runs/{run_id}/cancel:
    post:
      description: Cancel a running workflow.
      operationId: cancel_run_runs__run_id__cancel_post
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunId'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: CancelRun
  /runs/{run_id}/outputs:
    get:
      description: '**sapporo-wes-2.0.0 extension:** List the files in the outputs
        directory. If the download option is specified, download all outputs as a
        zip file.'
      operationId: get_run_outputs_list_runs__run_id__outputs_get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      - description: Download all outputs as a zip file.
        in: query
        name: download
        required: false
        schema:
          default: false
          description: Download all outputs as a zip file.
          title: Download
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example:
                outputs:
                - file_name: output.txt
                  file_url: http://localhost:1122/runs/abc123/outputs/output.txt
              schema:
                $ref: '#/components/schemas/OutputsListResponse'
            application/zip:
              description: ZIP archive of all outputs (when download=true)
              schema:
                format: binary
                type: string
          description: Successful response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: ListRunOutputs
  /runs/{run_id}/outputs/{path}:
    get:
      description: '**sapporo-wes-2.0.0 extension:** Download a file in the outputs
        directory.'
      operationId: get_run_outputs_runs__run_id__outputs__path__get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      - in: path
        name: path
        required: true
        schema:
          title: Path
          type: string
      responses:
        '200':
          content:
            application/json:
              schema: {}
            application/octet-stream:
              schema:
                format: binary
                type: string
          description: File content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: DownloadRunOutput
  /runs/{run_id}/ro-crate:
    get:
      description: '**sapporo-wes-2.0.0 extension:** Download the RO-Crate (ro-crate-metadata.json)
        of the run. If the download option is specified, download the entire Crate
        as a zip file.'
      operationId: get_run_ro_crate_runs__run_id__ro_crate_get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      - description: Download the entire Crate as a zip file.
        in: query
        name: download
        required: false
        schema:
          default: false
          description: Download the entire Crate as a zip file.
          title: Download
          type: boolean
      responses:
        '200':
          content:
            application/json:
              schema: {}
            application/ld+json:
              description: RO-Crate metadata in JSON-LD format
              schema:
                type: object
            application/zip:
              description: ZIP archive of the entire RO-Crate (when download=true)
              schema:
                format: binary
                type: string
          description: Successful response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: DownloadRO-Crate
  /runs/{run_id}/status:
    get:
      description: 'This provides an abbreviated (and likely fast depending on implementation)
        status of the running workflow, returning a simple result with the  overall
        state of the workflow run (e.g. RUNNING, see the State section).


        **sapporo-wes-2.0.0 extension:**


        - Always check the contents of the run dir and return the latest state of
        the run.'
      operationId: get_run_status_runs__run_id__status_get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunStatus'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: GetRunStatus
  /runs/{run_id}/tasks:
    get:
      description: 'This endpoint provides a paginated list of tasks that were executed
        as part of a given workflow run. Task ordering should be the same as what
        would be returned in a `RunLog` response body.


        **sapporo-wes-2.0.0 extension:**


        - This endpoint is not implemented and there are no plans to implement it.'
      operationId: list_tasks_runs__run_id__tasks_get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      - description: OPTIONAL The preferred number of task logs to return in a page.
          If not provided, the implementation should use a default page size. The
          implementation must not return more items than `page_size`, but it may return
          fewer.  Clients should not assume that if fewer than `page_size` items are
          returned that all items have been returned.  The availability of additional
          pages is indicated by the value of `next_page_token` in the response.
        in: query
        name: page_size
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          description: OPTIONAL The preferred number of task logs to return in a page.
            If not provided, the implementation should use a default page size. The
            implementation must not return more items than `page_size`, but it may
            return fewer.  Clients should not assume that if fewer than `page_size`
            items are returned that all items have been returned.  The availability
            of additional pages is indicated by the value of `next_page_token` in
            the response.
          title: Page Size
      - description: OPTIONAL Token to use to indicate where to start getting results.
          If unspecified, return the first page of results.
        in: query
        name: page_token
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: OPTIONAL Token to use to indicate where to start getting results.
            If unspecified, return the first page of results.
          title: Page Token
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskListResponse'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: ListTasks
  /runs/{run_id}/tasks/{task_id}:
    get:
      description: 'This endpoint provides a mechanism to retrieve information on
        a specific task, if it exists


        **sapporo-wes-2.0.0 extension:**


        - This endpoint is not implemented and there are no plans to implement it.'
      operationId: get_task_runs__run_id__tasks__task_id__get
      parameters:
      - in: path
        name: run_id
        required: true
        schema:
          title: Run Id
          type: string
      - in: path
        name: task_id
        required: true
        schema:
          title: Task Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskLog'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: GetTask
  /service-info:
    get:
      description: 'May include information related (but not limited to) the workflow
        descriptor formats, versions supported, the WES API versions supported, and
        information about general service availability.


        **sapporo-wes-2.0.0 extension:**


        - `system_state_count` is a snapshot that is aggregated every 30 minutes.
        It may not represent the latest state.

        - When authentication is enabled and a valid token is provided, `system_state_counts`
        shows only the runs belonging to the authenticated user.'
      operationId: get_service_info_service_info_get
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceInfo'
          description: Successful Response
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is unauthorized.
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: GetServiceInfo
  /token:
    post:
      description: "**sapporo-wes-2.0.0 extension:**\n\nAuthenticate user and create\
        \ an access token.\n\nThis endpoint supports both authentication modes:\n\n\
        - **Sapporo IdP mode**: Authenticates against local user credentials defined\
        \ in `auth_config.json`.\n  Passwords are verified using Argon2 hash comparison.\n\
        - **External IdP mode (confidential client)**: Forwards credentials to the\
        \ external IdP's token endpoint.\n\nThe returned JWT token should be included\
        \ in subsequent requests using the `Authorization: Bearer <token>` header.\n\
        \n**Security notes:**\n- Tokens have a configurable expiration time (default:\
        \ 24 hours, max: 168 hours)\n- All tokens include `iat` (issued at) and `exp`\
        \ (expiration) claims\n- Passwords are never logged or stored in plaintext"
      operationId: create_token_token_post
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Body_create_token_token_post'
        required: true
      responses:
        '200':
          content:
            application/json:
              example:
                access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                token_type: bearer
              schema:
                $ref: '#/components/schemas/TokenResponse'
          description: Successful authentication
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The request is malformed.
        '401':
          description: Invalid username or password
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requester is not authorized to perform this action.
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: The requested workflow run not found.
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: An unexpected error occurred.
      summary: CreateToken
servers:
- url: http://127.0.0.1:1122
